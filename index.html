<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#4a90e2">
    <meta name="description" content="Budget Pro - GÃ©rez vos dÃ©penses">

    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Budget Pro">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <title>Budget Pro â€“ Tableau de bord</title>
    <link rel="stylesheet" href="style.css">

    <!-- Chart.js : bibliothÃ¨que de graphiques (chargÃ©e depuis un CDN)
         Le service worker la mettra en cache lors du premier chargement -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>

    <!-- â”€â”€ BANNIÃˆRE HORS LIGNE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="offline-banner" class="offline-banner hidden">
        ğŸ“µ Mode hors ligne â€” DerniÃ¨res donnÃ©es affichÃ©es
    </div>

    <!-- â”€â”€ BARRE DE NAVIGATION SUPÃ‰RIEURE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <nav class="topbar">
        <div class="topbar-left">
            <span class="logo-icon">ğŸ’°</span>
            <span class="logo-text">Budget Pro</span>
        </div>
        <div class="topbar-right">
            <span id="nav-username" class="nav-username"></span>
            <button class="btn-logout" id="logout-btn" onclick="logout()">DÃ©connexion</button>
        </div>
    </nav>

    <!-- â”€â”€ CONTENU PRINCIPAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="main-container">

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             SECTION 1 : FORMULAIRE D'AJOUT DE DÃ‰PENSE
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section class="card" id="add-section">
            <h2 class="section-title">â• Nouvelle DÃ©pense</h2>

            <form id="expense-form" novalidate>

                <!-- Ligne 1 : Nom + Montant -->
                <div class="form-row">
                    <div class="field-group">
                        <label for="name">DÃ©signation</label>
                        <input type="text" id="name" placeholder="Ex: Courses MarchÃ©" required>
                    </div>
                    <div class="field-group">
                        <label for="amount">Montant (FCFA)</label>
                        <input type="number" id="amount" placeholder="Ex: 2500" min="1" required>
                    </div>
                </div>

                <!-- Ligne 2 : CatÃ©gorie + Date -->
                <div class="form-row">
                    <div class="field-group">
                        <label for="category">CatÃ©gorie</label>
                        <select id="category">
                            <option value="Alimentation">ğŸ½ Alimentation</option>
                            <option value="Transport">ğŸšŒ Transport</option>
                            <option value="Loisirs">ğŸ‰ Loisirs</option>
                            <option value="SantÃ©">ğŸ’Š SantÃ©</option>
                        </select>
                    </div>
                    <div class="field-group">
                        <label for="expense-date">Date de la dÃ©pense</label>
                        <input type="date" id="expense-date" required>
                    </div>
                </div>

                <!-- Ligne 3 : Heure + Minute -->
                <div class="form-row">
                    <div class="field-group">
                        <label for="expense-hour">Heure</label>
                        <select id="expense-hour">
                            <!-- Les options d'heures (0h Ã  23h) seront gÃ©nÃ©rÃ©es par JavaScript -->
                        </select>
                    </div>
                    <div class="field-group">
                        <label for="expense-minute">Minute</label>
                        <select id="expense-minute">
                            <option value="0">00 min</option>
                            <option value="15">15 min</option>
                            <option value="30">30 min</option>
                            <option value="45">45 min</option>
                        </select>
                    </div>
                </div>

                <!-- Zone d'erreur formulaire -->
                <div id="form-error" class="error-msg hidden"></div>
                <div id="form-success" class="success-msg hidden"></div>

                <button type="submit" class="btn-primary btn-full" id="add-btn">
                    <span class="btn-text">ğŸ’¾ Enregistrer la dÃ©pense</span>
                    <span class="btn-loading hidden">â³ Enregistrement...</span>
                </button>
            </form>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             SECTION 2 : GRAPHIQUES
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <section class="card" id="chart-section">
            <div class="section-header">
                <h2 class="section-title">ğŸ“Š Visualisation</h2>
                <!-- SÃ©lecteur du type de graphique -->
                <div class="chart-controls">
                    <select id="chart-type" onchange="changeChartType()">
                        <option value="bar_h">ğŸ“Š Barres (catÃ©gories)</option>
                        <option value="pie">ğŸ¥§ Camembert</option>
                        <option value="doughnut">ğŸ© Anneau</option>
                        <option value="line">ğŸ“ˆ Courbe (Ã©volution)</option>
                        <option value="bar_month">ğŸ“… Barres (mois)</option>
                    </select>
                </div>
            </div>

            <!-- Zone oÃ¹ le graphique Chart.js sera dessinÃ© -->
            <div class="chart-wrapper">
                <canvas id="main-chart"></canvas>
            </div>
        </section>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             SECTION 3 : FILTRES ET RÃ‰SUMÃ‰
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div class="filter-bar">
            <!-- Filtre par pÃ©riode -->
            <div class="filter-group">
                <label>ğŸ“… PÃ©riode</label>
                <select id="filter-period" onchange="applyFilters()">
                    <option value="all">Toutes les dates</option>
                    <option value="week">Cette semaine</option>
                    <option value="month" selected>Ce mois-ci</option>
                    <option value="year">Cette annÃ©e</option>
                </select>
            </div>
            <!-- Filtre par catÃ©gorie -->
            <div class="filter-group">
                <label>ğŸ· CatÃ©gorie</label>
                <select id="filter-category" onchange="applyFilters()">
                    <option value="Toutes">Toutes</option>
                    <option value="Alimentation">ğŸ½ Alimentation</option>
                    <option value="Transport">ğŸšŒ Transport</option>
                    <option value="Loisirs">ğŸ‰ Loisirs</option>
                    <option value="SantÃ©">ğŸ’Š SantÃ©</option>
                </select>
            </div>
            <!-- Total affichÃ© -->
            <div class="total-box">
                <span class="total-label">Total</span>
                <span id="total-display">0</span>
                <span class="total-currency">FCFA</span>
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             SECTION 4 : LISTE DES DÃ‰PENSES
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div class="table-wrapper">
            <!-- Indicateur de chargement -->
            <div id="loading-indicator" class="loading-indicator">
                <div class="spinner"></div>
                <p>Chargement...</p>
            </div>

            <!-- Message si aucune dÃ©pense -->
            <div id="empty-state" class="empty-state hidden">
                <div class="empty-icon">ğŸ’¸</div>
                <p>Aucune dÃ©pense pour cette pÃ©riode.</p>
                <p class="empty-sub">Utilisez le formulaire ci-dessus pour commencer.</p>
            </div>

            <!-- Tableau des dÃ©penses (sur grand Ã©cran) -->
            <table id="expense-table" class="expense-table hidden">
                <thead>
                    <tr>
                        <th>ğŸ“‹ DÃ©pense</th>
                        <th>ğŸ· CatÃ©gorie</th>
                        <th>ğŸ“… Date & Heure</th>
                        <th>ğŸ’µ Montant</th>
                        <th>âš™ï¸</th>
                    </tr>
                </thead>
                <tbody id="expense-list"></tbody>
            </table>

            <!-- Cartes des dÃ©penses (sur mobile) - les deux s'affichent selon l'Ã©cran -->
            <div id="expense-cards" class="expense-cards hidden"></div>
        </div>

    </div><!-- /main-container -->

    <!-- â”€â”€ BOUTON FLOTTANT (FAB) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         Sur mobile, ce bouton dÃ©file avec l'utilisateur et
         permet d'accÃ©der rapidement au formulaire d'ajout -->
    <button class="fab" onclick="scrollToForm()" title="Ajouter une dÃ©pense">
        ï¼‹
    </button>

    <script src="app.js"></script>
</body>
</html>
